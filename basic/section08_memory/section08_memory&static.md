# 자바 메모리 구조
- 메서드 영역 : 클래스 정보를 보관
- 스택 영역 : 실제 프로그램이 실행되는 영역, 메서드가 실행될 때마다 쌓인다.
- 힙 영역 : new(), 인스턴스가 생성되는 영역

### 메서드 영역
- 프로그램이 필요한 공통 데이터를 관리, 프로그램의 모든 영역에서 공유
  - 클래스 정보 : 클래스, 메서드 등의 실행 코드
  - static 영역 : static 변수 보관
  - 런타임 상수 풀 (자바의 최적화 영역)

> 메서드 코드는 메서드 영역에 생성된다. 인스턴스를 여러개 만들어도 메서드는 공유하는 것.  
> 인스턴스는 힙 영역에 생성되지만, 메서드 영역에서 메서드를 호출해서 사용

### 스택 영역
- 자바 실행시 하나의 실행 스택이 생성됨
  - 스택 프레임 : 메서드 호출시 프레임이 쌓이고 메서드가 종료되면 해당 스택 프레임은 없어짐
    - 스택 프래임 내에는 지역 변수, 중간 연산 결과, 메서드 호출 정보 등을 포함한다.

### 힙 영역
- 객체(인스턴스)와 배열이 생성 되는 영역
- GC가 이루어지는 영역

> 스택 영역은 각 쓰레드 별로 실행 스택이 생성됨 (멀티 쓰레드)


# 스택과 힙 영역
## 스택과 큐
- 스택 : 후입선출(LIFO)
- 큐 : 선입선출(FIFO)

> 프로그램 실행과 메서드 호출에는 스택 구조가 적합하다.

**스택 프레임**  
> 자바는 스택 영역을 사용해서 메서드 호출과 지역 변수(매개변수 포함)을 관리한다.
> 메서드를 계속 호출하면 스택 프레임이 계속 쌓인다.
> 스택 프레임이 종료되면 지역 변수도 함께 제거된다.

**스택과 힙 영역**
> 인스턴스가 생성 되면, 힙 영역에 생성되고
> 메서드의 매개변수로 전달하면 힙 영역의 인스턴스를 참조한다.
> 해당 인스턴스를 참조하는 곳이 없다면, GC가 제거시킨다.
> 힙 영역 안에서만 인스턴스끼리 참조하는 경우에도 GC의 대상이 된다.

> 지역 변수는 스택 영역에, 객체는 힙 영역에서 관리된다.


# Static 
## 변수
- static 변수를 활용하면 공용으로 함께 사용할 수 있다.
- static 변수 = 정적 변수 = 클래스 변수
- 'ClassName.변수명' 으로 접근한다.
  ```java
  public class Data3 {
    public String name;
    public static int count;
  
    public Data3(String name) {
      this.name = name;
      count++; // 자기 자신의 변수 접근
    }
  }
  ```
  
  ```java
  public class DataMain3 {
    Data data = new Data3("A");
    System.out.println("A count = " + Data3.count); // static 변수 접근
  }
  ```
  > 인스턴스를 통한 접근이 가능하지만 권장하지 않는다. 직관적이지 못함. ```data3.count (x)```

- 메서드 영역에서 관리한다. (인스턴스 영역 xx)
  > static 변수는 클래스인 붕어빵 틀이 관리하는 변수이다.  
  > 클래스 변수는 1개만 존재하는 반면 인스턴스인 붕어빵은 인스턴스의 수 만큼 변수가 존재한다.

<br>

**정리하기**  
> - 멤버 변수
>   - 인스턴스 변수 : static 이 붙지 않은 변수. 인스턴스를 만들 때마다 생성됨  
>   - 클래스 변수 : static이 붙은 변수
>     - 클래스 변수, 정적 변수, static 변수 -> 동일한 용어
>     - 클래스 자체에 소속되어있다. 인스턴스와 무관하게 클래스에서 바로 접근 가능
>     - 클래스 변수는 자바 프로그램이 시작할 때 딱 1개 만들어진다

### 변수와 생명주기
- 지역변수(매개변수)
  - 스택 프레임 안에 보관되고, 메서드가 종료되면 프레임과 함께 제거됨
- 인스턴스 변수
  - 힙 영역에서 관리 GC가 제거할 때까지 존재
- 클래스 변수
  - static 영역에 보관되는 변수. 메서드 영역은 프로그램 전체에서 사용하는 공용공간으로 JVM에 로딩 되는 순간 생성됨. 그리고 JVM이 종료될 때 종료.

> static = "정적" <-> 힙 영역은 동적으로 생성된다


## 메서드
- static이 붙은 메서드는 객체 생서 없이 바로 호출할 수 있다.
- 클래스 메서드 (static 메서드) <-> 인스턴스 메서드

### 정적 메서드 사용법
- **```static``` 메서드는 ```static``` 만 사용할 수 있다.** (컴파일 에러 발생)
- 반대로, 모든 곳에서 ```static``` 을 호출할 수 있다.
  > 인스턴스 변수는 인스턴스를 생성해줘야 힙영역에 생긴다. 따라서 static 메서드가 해당 변수를 사용할 수는 없다. (같은 클래스 내에서)
  > 메서드 영역에서는 참조값을 알 방법이 없다. (붕어빵 틀이 붕어빵을 찾을 수 없음)  
  > 정적 메서드는 클래스의 이름을 통해 바로 호출할 수 있기 때문에, 참조값의 개념이 없다.  
  > 특정 인스턴스의 기능을 사용하려면 참조값을 알아야하는데, 이것이 불가능 하기 때문 

### 정적 메서드 활용
객체 생성이 필요 없이 메서드의 호출만으로 필요한 기능을 수행할 떄 주로 사용
유틸리티성 메서드, 또는 수학 기능의 메서드 등

### main() 메서드
프로그램을 시작하는 시작점이 되는데, 객체를 생성하지 않아도 작동한다.
정적 메서드는 정적 메서드만 호출할 수 있다. 따라서 main()이 호출하는 메서드에는 정적 메서드를 사용한다.
