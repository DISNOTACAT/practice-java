# 다형성 활용
> 서로 다른 타입의 객체들에게 동일한 메서드를 사용할 수 있게 하려면 어떤 방법이 있을까?  

```Cat```, ```Dog```, ```Caw``` -> `animalSound()`
각자 ```"울음소리: " + cat.sound()``` 를 한다면 반복된 중복 코드 발생

1. `Animal` 클래스를 만들어서 상속
2. 각자 소리를 `@overriding` 한다.
3. `animalSound(Animal animal)` 메서를 통해 모든 하위 동물들이 하나의 메서드로 소리를 출려한다.
4. `Animal[] animals = {cat, dog, caw, ...}` 배열을 활용해서 리팩토링 가능

> 확장에 열려있는  
> 새로운 기능이 추가되었을 때 변하는 부분이 최소화 되어있는 코드는 잘 작성된 코드이다.  
> 이를 위해 변하는 부분(Pig)과 변하지 않는 부분(Animal)의 코드를 명확하게 구분해야 한다.

여기서 Pig 를 추가하더라도 Animal의 코드에 바뀔 부분은 없다.
그저 Pig 클래스 내에 메서드 오버라이딩을 반드시 추가하면 된다.

하지만 `Animal` 이라는 클래스는 너무 추상적이다 `Animal` 자체가 쓰일 일이 있을까? 인스턴스 생성은 하위 클래스를 위해 반드시 이루어질 것이다.
또한 만약 `Pig`에 오버라이딩하는 것을 깜박한다면? `Pig`의 울음 소리를 들을 수 없게 된다.

> 좋은 프로그램을 제약이 있는 프로그램이다.


# 추상 클래스
부모 클래스는 제공하지만, 실제 생성되면 안되는 클래스
> 이름 그대로, 추상적인 개념을 제공하는 목적의 클래스이다. 실제 인스턴스가 존재하지 않는다.  
> 상속을 목적으로 부모 클래스 역할을 담당할 뿐
```java
public abstract class Animal {}
```

### 추상 메서드 
부모 클래스를 상속 받는 자식 클래스에서 반드시 오버라이딩 해주어야하는 메서드
- abstact 키워드가 메서드 앞에 붙는다.
- 해당 클래스를 상속받았을 경우 반드시 오버라이딩 해야한다. (자식도 abstract 면 상관 없음, 안하면 컴파일 오류)
- 제약의 목적으로 추상메서드 원본은 바디를 가지고 있지 않다.
```java
public abstract void sound();
```

> 추상 클래스는 제약이 추가된 클래스일 뿐, 메모리 구조, 실행 결과등 그 외는 일반 클래스와 동일하다.  
> - 추상 클래스를 통해 
>   - `Animal` 인스턴스 생성 문제를 해결
>   - `sound()`를 오버라이딩 하지 않는 문제 해결

### 순수 추상 클래스
추상 메서드만 가진 추상 클래스
- 인스턴스를 생성할 수 없다.
- 상속시 자식은 모든 메서드를 오버라이딩 해야한다.
- 주로 다형성을 위해 사용된다.

> 추상 클래스는 마치 어떤 규격을 지켜야하는 것처럼 느껴진다.
>
> USB를 생각해보자. 분명한 규격이 있다. 이 규격에 맞추어 제품을 개발해야한다.
> 이런 순수 추상 클래스 개념은 프로그래밍에서 매우 자주 사용되고, 더 편리하게 사용하기 위해 자바는 인터페이스라는 개념을 제공한다.

# 인터페이스
인터페이스는 순수 추상 클래스와 같고, 편의기능이 추가된다.
- 순수 추상 클래스 특징
  - 인스턴스 생성 불가
  - 상속시 모든 메서드 오버라이딩
  - 다형성을 위한 구현
- 인터페이스의 메서드는 모두 `public`, `abstract` (코드 생략 권장)
- 인터페이스는 다중 구현(다중 상속) 지원


### 인터페이스와 멤버변수
멤버변수는 `public static final`이 모두 포함되어있다고 간주됨 -> 상수
```java
public interface InterfaceAnimal {
  int MY_PI = 3.14; // 접근제한 및 final 생략 후 상수 표기 적용
}
```

> **클래스, 추상 클래스, 인터페이스는 모두 똑같다.**
> 자바에는 순수 추상 클래스라는 것이 별도로 없고, 인터페이스를 사용한다.


### 상속 vs 구현
> 인터페이스는 상속이 아닌, '구현'이라고 표현한다.

부모의 클래스를 통해 기능을 물려받는 것이 구현. 인터페이스는 모두 추상 메서드로 물려받을 수 있는 기능이 없다.
오히려 오버라이딩을 통해 정의를 해주어야 한다. -> 구현

### 인터페이스를 사용해야하는 이유
- 제약 : 추상 메서드를 활용해서 순수 추상 클래스 활용 제약을 설정한다.
- 다중 구현: 상속은 부모 하나만 지정할 수 있지만 인터페이스는 다중 구현이 가능

> 참고  
> 자바8의 `default`와 자바9의 `private`를 사용하면 인터페이스에도 메서드를 구현할 수 있다. 하지만 예외적으로 아주 특별한 부분으로 주의할 것

### 인터페이스 다중 구현
다이아몬드 문제를 인터페이스를 활용해서 해결할 수 있다.
인터페이스 두 개의 메서드 명이 같더라도, 결국 재정의한 것만 구현된다. 왜냐? 인터페이스 내에는 아무 기능도 들어있지 않음

